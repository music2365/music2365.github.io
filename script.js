const audio = document.getElementById("audio");
const progress = document.getElementById("progress");
const current = document.getElementById("current");
const duration = document.getElementById("duration");
const nowPlaying = document.getElementById("nowPlaying");
const playPauseBtn = document.getElementById("playPauseBtn");

const songs = [
  {
    title: "Back to Friends â€“ sombr",
    src: "music/back to friends - sombr - SoundLoadMate.com.mp3"
  }
];

let songIndex = 0;

function playSong(index) {
  songIndex = index;
  audio.src = songs[index].src;
  nowPlaying.textContent = songs[index].title;
  audio.play();
  updateButton(); // make sure button shows pause
}

function togglePlay() {
  if(audio.paused){
    audio.play();
  } else {
    audio.pause();
  }
  updateButton();
}

function updateButton() {
  if(audio.paused){
    playPauseBtn.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQICIBTaarNlx6CFs0EjFLUR2VLkdsDODbtgw&s"; // show play image
  } else {
    playPauseBtn.src = "data:image/png;base64,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"; // show pause image
  }
}

function next() {
  songIndex = (songIndex + 1) % songs.length;
  playSong(songIndex);
}

function prev() {
  songIndex = (songIndex - 1 + songs.length) % songs.length;
  playSong(songIndex);
}

audio.addEventListener("timeupdate", () => {
  progress.value = (audio.currentTime / audio.duration) * 100 || 0;
  current.textContent = format(audio.currentTime);
  duration.textContent = format(audio.duration);
});

progress.addEventListener("input", () => {
  audio.currentTime = (progress.value / 100) * audio.duration;
});

function format(time) {
  if (!time) return "0:00";
  const min = Math.floor(time / 60);
  const sec = Math.floor(time % 60).toString().padStart(2, "0");
  return `${min}:${sec}`;
}

// Make sure button updates if audio ends
audio.addEventListener("ended", updateButton);
